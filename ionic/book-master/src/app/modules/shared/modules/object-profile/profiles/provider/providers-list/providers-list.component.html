<ion-card>
  <ion-card-header color="tertiary">
    <ion-card-title>{{ 'providersList.title' | t }}</ion-card-title>
  </ion-card-header>

  <ion-card-content style="border-bottom: 1px solid">
    <ion-searchbar [(ngModel)]="searchQuery"
                   (ionInput)="onSearchQueryChange($any($event.detail).value)"
                   [placeholder]="'providersList.searchPlaceholder' | t"></ion-searchbar>

    <ion-searchbar [(ngModel)]="searchLocation"
                   (ionInput)="onSearchLocationChange($any($event.detail).value)"
                   [placeholder]="'providersList.cityPlaceholder' | t"></ion-searchbar>

    <ion-item lines="none" class="provider-type-filter">
      <ion-label>{{ 'providersList.typeLabel' | t }}</ion-label>
      <ion-select [(ngModel)]="selectedProviderType"
                  interface="popover"
                  [placeholder]="'providersList.allTypes' | t"
                  (ionChange)="onProviderTypeChange($any($event.detail).value)">
        <ion-select-option [value]="''">{{ 'providersList.allTypes' | t }}</ion-select-option>
        <ion-select-option *ngFor="let providerType of providerTypeOptions" [value]="providerType">
          {{ formatProviderType(providerType) }}
        </ion-select-option>
      </ion-select>
    </ion-item>

    <ion-list *ngIf="showCitySuggestions" class="city-suggestions">
      <ion-item [button]="true" detail="false" *ngFor="let city of citySuggestions" (click)="selectCity(city)">
        <ion-label>{{ city }}</ion-label>
      </ion-item>
    </ion-list>
  </ion-card-content>

  <ion-list>
    <ion-item *ngFor="let provider of filteredProviders" class="provider-row">
      <ion-avatar slot="start" class="provider-avatar">
        <img [attr.alt]="'common.avatarAlt' | t" src="https://ionicframework.com/docs/img/demos/avatar.svg"/>
      </ion-avatar>

      <ion-label class="provider-text">
        <h2 class="provider-name">{{ provider.name }}</h2>
        <p class="provider-description" *ngIf="provider.description">{{ provider.description }}</p>
      </ion-label>

      <ion-button slot="end" size="small" class="provider-action" (click)="selected.emit(provider)">
        <ion-icon name="list-circle-outline"></ion-icon>
      </ion-button>
    </ion-item>

    <ion-item *ngIf="filteredProviders.length === 0" lines="none">
      <ion-label>{{ 'providersList.empty' | t }}</ion-label>
    </ion-item>
  </ion-list>
</ion-card>
